<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8"/>
	 <meta name="format-detection" content="telephone=no" />
	 <meta name="msapplication-tap-highlight" content="no" />
	 <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi">
     <link rel="stylesheet" type="text/css" href="css/styles.css">
	 <script src="js/jquery-2.1.1.min.js"></script>
   <script type="text/javascript"> 

$(document).ready(function(e){
    $("#capturePhoneButton").click(function(){
    	 e.preventDefault();
         capturePhoto();
          return false;
    });
      $("#fromPhotoLibraryButton'").click(function(){
    	 e.preventDefault();
          getPhoto(pictureSource.PHOTOLIBRARY);
            return false;
    });
    
});
 </script>
     <title>DCMTest</title>
        
	</head>
    <body>
            <h1>DCM</h1>
        
        <div data-role="page" id="cameraMainPage" data-add-back-btn="true" back-btn-text="back">

       <div data-role="header">

            <h1>Camera</h1>

     </div>
      <div data-role="content">

       <ul data-role="listview" data-inset="true">

       <li><a href="#" id="capturePhoneButton">Capture Photo</a></li>
         <li><a href="#" id="fromPhotoLibraryButton">From Photo Library</a></li>

        </ul>

    <div class="mesgBox">

        	<p id="info"></p>
           </div>

           <div data-role="popup" id="popupPhoto" class="ui-content" data-theme="e" data-corners="false">

              <h5 class="hlabel">Image URI</h5>

                <p id="pictBox" class="content mesgBox"></p>

              <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>

                <img class="popphoto" id="popImage" src="">

           </div>

      </div>

      <div data-role="footer">

          <div id="cameraStatus"></div>

      </div>

   </div>
   <ul data-role="listview" data-inset="true">                

<li><a href="#" id="capturePhoneButton">Capture Photo</a></li>

<li><a href="#" id="fromPhotoLibraryButton">From Photo Library</a></li>

</ul>


       <footer>
	 <ul id="tab-bar">
    <li>
       <button id="geolocation" onclick="waarBenIk();">Locatie</button>
    </li>
 
    <li>
        <li><a href="#" id="capturePhoneButton">Capture Photo</a></li>
    </li>
     <li><a href="#" id="fromPhotoLibraryButton">From Photo Library</a></li>
 
    <li>
       <button id="tostel" onclick="toestelInfo();">Toestel informatie</button>
    </li>
    </ul>
    

     
      </footer>
<script type="text/javascript" src="PhoneGap.js"></script>
 <script src="js/cameraAan.js"></script>
<script>
  function waarBenIk() {

                navigator.geolocation.getCurrentPosition(success, error);
            }
             
            function success(position) {
			
                var element = document.getElementById('locatie');
                element.innerHTML = 'Latitude: ' + position.coords.latitude     + '<br />' +
                'Longitude: '           + position.coords.longitude             + '<br />' +
                'Altitude: '            + position.coords.altitude              + '<br />' +
                'Accuracy: '            + position.coords.accuracy              + '<br />' +
                'Altitude Accuracy: '   + position.coords.altitudeAccuracy      + '<br />' +
                'Heading: '             + position.coords.heading               + '<br />' +
                'Speed: '               + position.coords.speed                 + '<br />' +
                'Timestamp: '           + new Date(position.timestamp)          + '<br />';
            }
             
            function error(error) {
                alert(error.message);
            }


   var pictureSource;
   var destinationType;
   
   function updateCameraStatus(status) {
       $("#cameraStatus").html(status);

    }

   

  function photoOnFail(message) {
      updateCameraStatus("ERROR: " + message);
  }


   function onPhotoDataSuccess(imageData) {

       $("#popImage").attr("src", "data:image/jpeg;base64," + imageData);

       $("#popupPhoto").popup("open");

   }
 

  function onPhotoURISuccess(imageURI) {

    $("#popImage").attr("src", imageURI);
        //$("#pictBox").empty();

       //$("#pictBox").append(imageURI).trigger("create");

        $("#pictBox").html(imageURI);

        updateCameraStatus("SUCCESS: Image loaded");

       $("#popupPhoto").popup("open");

   }


    function capturePhoto() {

       navigator.camera.getPicture(onPhotoURISuccess, photoOnFail, { quality: 50, destinationType: destinationType.FILE_URI });

   }
 function capturePhotoEdit() {   
    navigator.camera.getPicture(onPhotoDataSuccess, photoOnFail, { quality: 20, allowEdit: true, destinationType: destinationType.DATA_URL });
  }
 function getPhoto(source) {
      updateCameraStatus("");        

        navigator.camera.getPicture(onPhotoURISuccess, photoOnFail, { quality: 50, destinationType: destinationType.FILE_URI, sourceType: source });
  }

function getCameraReady() {
    $("popupPhoto").popup("close");     

      updateCameraStatus("");

     pictureSource   = navigator.camera.PictureSourceType;
       destinationType = navigator.camera.DestinationType;
$('#capturePhoneButton').on('vclick', function(e) {

           e.preventDefault();

           capturePhoto();

          return false;

      });

       

       $('#fromPhotoLibraryButton').on('vclick', function(e){

           e.preventDefault();

           getPhoto(pictureSource.PHOTOLIBRARY);

           return false;

        });
   }


 $("#cameraMainPage").bind("pagebeforeshow", function() { getCameraReady(); } );



	
</script>
    </body>
</html>

