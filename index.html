<!DOCTYPE html>
<html>

    <head>
	<meta charset="utf-8"/>
	 <meta name="format-detection" content="telephone=no" />
	 <meta name="msapplication-tap-highlight" content="no" />
	 <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi">
     <link rel="stylesheet" type="text/css" href="css/styles.css">
	 <script src="js/jquery-2.1.1.min.js"></script>
	 <script> 
	 $( window ).load( toestelInfo );
	 $( document ).ready(function() {

        

});


	 
	 document.onload = function()
	 {
	 
                	
	 }
	 </script>
     <title>DCMTest</title>
        
	</head>
    <body>
        
				

            <h1>DCM</h1>
      
  
        <div id="app">
	   	   <img src="" id="myImage" width="80"></img> </br>
			<div id="locatie"></div>
			<span id="battery"></span>
				
			<div id="deviceready">
			<p class="event listening">Loading</p>
			<p class="event received">Apparaat is klaar</p>
			<p id="info"></p>			
			</div>
   
   
        </div>
  <div data-role="page" id="cameraMainPage" data-add-back-btn="true" back-btn-text="back">

      <div data-role="header">

            <h1>Camera</h1>

     </div>
      <div data-role="content">

       <ul data-role="listview" data-inset="true">

       <li><a href="#" id="capturePhoneButton">Capture Photo</a></li>
         <li><a href="#" id="fromPhotoLibraryButton">From Photo Library</a></li>

        </ul>

    <div class="mesgBox">

          <h5 class="hlabel">Using camera.getPicture method</h5>

               <ul class="smFont">
                 <li>For both of the above menu items, URI is used to retrieve the image.<br/>
                 Along with each image, the corresponding URI is shown.
                 </li>

               </ul>           

           </div>

           <div data-role="popup" id="popupPhoto" class="ui-content" data-theme="e" data-corners="false">

              <h5 class="hlabel">Image URI</h5>

                <p id="pictBox" class="content mesgBox"></p>

              <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>

                <img class="popphoto" id="popImage" src="">

           </div>

      </div>

      <div data-role="footer">

          <div id="cameraStatus"></div>

      </div>

   </div>

       <footer>
	 <ul id="tab-bar">
    <li>
       <button id="geolocation" onclick="waarBenIk();">Locatie</button>
    </li>
 
    <li>
        <button id="cameraAanZett" onclick="capturePhoto();">Camera</button>
    </li>
 
    <li>
       <button id="tostel" onclick="toestelInfo();">Toestel informatie</button>
    </li>
    </ul>

     
      </footer>
<script type="text/javascript" src="PhoneGap.js"></script>
 <script src="js/cameraAan.js"></script>
<script>
  function waarBenIk() {

                navigator.geolocation.getCurrentPosition(success, error);
            }
             
            function success(position) {
			
                var element = document.getElementById('locatie');
                element.innerHTML = 'Latitude: ' + position.coords.latitude     + '<br />' +
                'Longitude: '           + position.coords.longitude             + '<br />' +
                'Altitude: '            + position.coords.altitude              + '<br />' +
                'Accuracy: '            + position.coords.accuracy              + '<br />' +
                'Altitude Accuracy: '   + position.coords.altitudeAccuracy      + '<br />' +
                'Heading: '             + position.coords.heading               + '<br />' +
                'Speed: '               + position.coords.speed                 + '<br />' +
                'Timestamp: '           + new Date(position.timestamp)          + '<br />';
            }
             
            function error(error) {
                alert(error.message);
            }

 function  toestelInfo() {
 		document.addEventListener("deviceready", onDeviceReady, false);
                document.addEventListener("batterystatus", onBatteryStatus, false);
 }

	function onDeviceReady() {
		var parentElement = document.getElementById("deviceready");
		var listeningElement = parentElement.querySelector('.listening');
		var receivedElement = parentElement.querySelector('.received');
		
		listeningElement.setAttribute('style', 'display:none;');
		receivedElement.setAttribute('style', 'display:block;');
		
		$("#info").html('Toestel model: '+device.model+'<br/>');
		$("#info").append('Besturing systeem : '+device.platform+' '+ device.version+'<br/>');
		
	
	}
	function onBatteryStatus(info) {
		
		$("#battery").html('Level: ' +info.level + '<br/> isPlugged: ' + info.isPlugged);
		
	
	}

function maakFoto() {

	
		
	navigator.camera.getPicture(onSuccess, onFail, { quality: 50, destinationType: destinationType.FILE_URI });
	
	function onSuccess(imageData) {
		var image = document.getElementById('myImage');
		image.src = "data:image/jpg;base64," + imageData;
		console.log("image updated");
			}
        	function onFail(message) {
		
		console.log('Error omdat: ' + message);
			}
			
	}
	
	var pictureSource;
	var destinationType;
	function onPhotoURISuccess(imageURI) {

    $("#popImage").attr("src", imageURI);
        //$("#pictBox").empty();

       //$("#pictBox").append(imageURI).trigger("create");

        $("#pictBox").html(imageURI);

        updateCameraStatus("SUCCESS: Image loaded");

       $("#popupPhoto").popup("open");
		
	}
       
       
    function capturePhoto() {

       navigator.camera.getPicture(onPhotoURISuccess, photoOnFail, { quality: 50, destinationType: destinationType.FILE_URI });

   }



	
</script>
    </body>
</html>

